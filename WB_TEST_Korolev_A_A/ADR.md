# Управление транзакциями в локальной БД

## Функциональные требования

[Интерфейс по управлению транзакциями](https://example.com/issue/тут_ваш_номер_задачи)

## Технический контекст

Пользователь взаимодействует с веб-интерфейсом (WEB UI). UI отправляет HTTP-запросы к APIGateway. APIGateway транслирует запросы в сервис BillingService. BillingService извлекает все транзакции из центрального хранилища Balance. В хранилище Balance хранятся все транзакции, совершенные во всех сервисах компании. После получения транзакций из Balance, BillingService сохраняет их в своей локальной базе данных (БД). В случае возникновения ошибки при обращении к сервису Balance, BillingService извлекает список транзакций из своей локальной БД.

** Предложить 3 варианта для сохранения транзакций в локальной БД
   Вариант 1: Сервис Balance возвращает 1000+ последних транзакций.
   Вариант 2: Сервис Balance возвращает 100 (лимит) последних транзакций.
   Вариант 3: Бесконечная пагинация 

## Архитектура

### Диаграмма последовательности

#### Вариант 1: Сервис Balance возвращает 1000+ последних транзакций

![Диаграмма последовательности (Вариант 1)](./sequence_diagram_variant1.png)

#### Вариант 2: Сервис Balance возвращает 100 (лимит) последних транзакций

![Диаграмма последовательности (Вариант 2)](./sequence_diagram_variant2.png)

#### Вариант 3: Бесконечная пагинация

![Диаграмма последовательности (Вариант 3)](./sequence_diagram_variant3.png)

### C4-модель: Уровень C1 (Системы)

#### Вариант 1: Сервис Balance возвращает 1000+ последних транзакций

![C4-модель: Уровень C1 (Системы) (Вариант 1)](./context_diagram_variant1.png)

#### Вариант 2: Сервис Balance возвращает 100 (лимит) последних транзакций

![C4-модель: Уровень C1 (Системы) (Вариант 2)](./context_diagram_variant2.png)

#### Вариант 3: Бесконечная пагинация

![C4-модель: Уровень C1 (Системы) (Вариант 3)](./context_diagram_variant3.png)

### C4-модель: Уровень C2 (Контейнеры)

#### Вариант 1: Сервис Balance возвращает 1000+ последних транзакций

![C4-модель: Уровень C2 (Контейнеры) (Вариант 1)](./container_diagram_variant1.png)

#### Вариант 2: Сервис Balance возвращает 100 (лимит) последних транзакций

![C4-модель: Уровень C2 (Контейнеры) (Вариант 2)](./container_diagram_variant2.png)

#### Вариант 3: Бесконечная пагинация

![C4-модель: Уровень C2 (Контейнеры) (Вариант 3)](./container_diagram_variant3.png)
